نمط المستودع (Repository Pattern)
=========================

هذا المجلد يحتوي على فئات المستودعات التي تجرد عمليات قاعدة البيانات.
جميع المستودعات تتبع نفس النمط للحفاظ على التناسق.

المستودعات المطبقة حالياً مع عملياتها:

1. مستودع المشرفين (Admin Repository)
   - جلب المشرف بالرقم التعريفي (getAdminById)
   - جلب المشرف بالبريد الإلكتروني (getAdminByEmail)
   - جلب جميع المشرفين مع ترقيم الصفحات (getAllAdmins)
   - إنشاء مشرف جديد (createAdmin)
   - تحديث بيانات مشرف (updateAdmin)
   - حذف مشرف (deleteAdmin)
   - تحديث كلمة مرور مشرف (updatePassword)
   - تبديل حالة نشاط المشرف (toggleActiveStatus)

2. مستودع المستخدمين (User Repository)
   - جلب المستخدم بالرقم التعريفي (getUserById)
   - جلب المستخدم بالبريد الإلكتروني (getUserByEmail)
   - جلب المستخدم برقم الهاتف (getUserByPhone)
   - جلب جميع المستخدمين مع ترقيم الصفحات (getAllUsers)
   - إنشاء مستخدم جديد (createUser)
   - تحديث بيانات مستخدم (updateUser)
   - حذف مستخدم (deleteUser)
   - تحديث كلمة مرور مستخدم (updatePassword)
   - تبديل حالة تقييد المستخدم (toggleRestrictionStatus)

3. مستودع الجلسات (Session Repository)
   - جلب جميع الجلسات مع ترقيم الصفحات (getAllSessions)
   - جلب جلسة بالرقم التعريفي (getSessionById)
   - جلب الجلسات حسب رقم تعريف الطبيب (getSessionsByDoctorId)
   - إنشاء جلسة جديدة (createSession)
   - تحديث بيانات جلسة (updateSession)
   - حذف جلسة (deleteSession)
   - تبديل حالة نشاط الجلسة (toggleSessionStatus)

4. مستودع الاستشارات (Consultation Repository)
   - جلب الاستشارة بالرقم التعريفي مع البيانات المرتبطة (getConsultationById)
   - جلب جميع الاستشارات مع ترقيم الصفحات (getAllConsultations)
   - جلب الاستشارات حسب رقم تعريف المستخدم (getConsultationsByUserId)
   - جلب الاستشارات حسب رقم تعريف الطبيب (getConsultationsByDoctorId)
   - جلب أرقام تعريف الاستشارات حسب رقم تعريف المستخدم (getConsultationIdsByUserId)
   - جلب أرقام تعريف الاستشارات حسب رقم تعريف الطبيب (getConsultationIdsByAdminId)
   - إنشاء استشارة جديدة (createConsultation)
   - تحديث بيانات استشارة (updateConsultation)
   - حذف استشارة (deleteConsultation)
   - تحديث حالة الاستشارة (updateStatus)

5. مستودع الدردشة (Chat Repository)
    - جلب الدردشة بالرقم التعريفي مع البيانات المرتبطة (getChatById)
    - جلب جميع الدردشات مع ترقيم الصفحات (getAllChats)
    - جلب الدردشات حسب أرقام تعريف الاستشارات (getChatsByConsultationIds)
    - جلب الدردشة حسب رقم تعريف الاستشارة (getChatByConsultationId)
    - إنشاء دردشة جديدة لاستشارة (createChat)
    - تحديث ختم زمن آخر رسالة في الدردشة (updateLastMessageTimestamp)
    - تبديل حالة نشاط الدردشة (toggleChatStatus)

6. مستودع الرسائل (Message Repository)
   - جلب الرسالة بالرقم التعريفي (getMessageById)
   - جلب الرسائل حسب رقم تعريف الدردشة مع ترقيم الصفحات (getMessagesByChatId)
   - إنشاء رسالة جديدة (createMessage)
   - تعليم الرسالة كمقروءة (markMessageAsRead)
   - تحديث بيانات رسالة (updateMessage)
   - حذف رسالة (deleteMessage)

7. مستودع كلمات المرور المؤقتة (OTP Repository)
   - تخزين كلمة مرور مؤقتة للمستخدم أو المشرف (storeOTP)
   - التحقق من صحة كلمة المرور المؤقتة (validateOTP)
   - جلب كلمة المرور المؤقتة حسب رقم تعريف المستخدم أو المشرف (getOTPByUserId)
   - حذف كلمة المرور المؤقتة حسب رقم تعريف المستخدم أو المشرف (deleteOTPByUserId)
   - تنظيف كلمات المرور المؤقتة المنتهية الصلاحية (cleanupExpiredOTPs)

8. مستودع رموز التحديث (Refresh Token Repository)
   - تخزين رمز التحديث (storeRefreshToken)
   - جلب رمز التحديث حسب القيمة (getRefreshTokenByToken)
   - جلب رموز التحديث حسب رقم تعريف المستخدم أو المشرف (getRefreshTokensByUserId)
   - حذف رمز التحديث حسب القيمة (deleteRefreshTokenByToken)
   - حذف رموز التحديث حسب رقم تعريف المستخدم أو المشرف (deleteRefreshTokensByUserId)
   - تنظيف رموز التحديث المنتهية الصلاحية (cleanupExpiredTokens)

9. مستودع الرموز الملغاة (Blacklisted Token Repository)
   - إضافة رمز إلى قائمة الرموز الملغاة (blacklistToken)
   - التحقق مما إذا كان الرمز ملغى (isTokenBlacklisted)
   - جلب رمز ملغى حسب القيمة (getBlacklistedTokenByToken)
   - تنظيف الرموز الملغاة المنتهية الصلاحية (cleanupExpiredTokens)

10. مستودع المراجعات (Review Repository)
    - جلب جميع المراجعات مع ترقيم الصفحات (getAllReviews)
    - جلب مراجعة بالرقم التعريفي (getReviewById)
    - جلب المراجعات حسب رقم تعريف المستخدم (getReviewsByUserId)
    - إنشاء مراجعة جديدة (createReview)
    - تحديث بيانات مراجعة (updateReview) - مالك المراجعة أو الطبيب أو الإداري أو السوبير إداري
    - حذف مراجعة (deleteReview) - مالك المراجعة أو الطبيب أو الإداري أو السوبير إداري
    - تبديل حالة نشاط المراجعة (toggleReviewStatus) - مالك المراجعة أو الطبيب أو الإداري أو السوبير إداري
    - جلب متوسط التقييم (getAverageRating)

11. مستودع الخدمات (Service Repository)
    - جلب جميع الخدمات مع ترقيم الصفحات (getAllServices)
    - جلب خدمة بالرقم التعريفي (getServiceById)
    - إنشاء خدمة جديدة (createService)
    - تحديث بيانات خدمة (updateService)
    - حذف خدمة (deleteService)
    - تبديل حالة نشاط الخدمة (toggleServiceStatus)

12. مستودع التواصل (Contact Us Repository)
    - جلب معلومات التواصل (getContactInfo)
    - تحديث معلومات التواصل (updateContactInfo)
    - تبديل حالة نشاط معلومات التواصل (toggleContactStatus)

13. مستودع الأوقات المتاحة (Availability Repository)
    - جلب جميع الأوقات المتاحة مع ترقيم الصفحات (getAllAvailability)
    - جلب وقت متاح بالرقم التعريفي (getAvailabilityById)
    - جلب الأوقات المتاحة حسب رقم تعريف المسؤول (getAvailabilityByAdminId)
    - إنشاء وقت متاح جديد (createAvailability)
    - تحديث بيانات وقت متاح (updateAvailability)
    - حذف وقت متاح (deleteAvailability) - حذف دائم من قاعدة البيانات
    - حجز وقت متاح (bookAvailabilitySlot)
    - إلغاء حجز وقت متاح (cancelBooking)
    - تحديث الأوقات الماضية إلى غير متاحة تلقائياً (markPastSlotsAsUnavailable)

14. مستودع السجلات الطبية (Medical Record Repository)
   - إنشاء سجل طبي جديد (createMedicalRecord)
   - جلب سجل طبي بالرقم التعريفي (getMedicalRecordById)
   - جلب جميع السجلات الطبية مع ترقيم الصفحات (getAllMedicalRecords)
   - جلب السجلات الطبية حسب رقم تعريف المستخدم (getMedicalRecordsByUserId)
   - جلب السجلات الطبية حسب رقم تعريف الطبيب (getMedicalRecordsByDoctorId)
   - جلب السجلات الطبية حسب رقم تعريف الطبيب مع استبعاد المستخدمين المقيّدين (getMedicalRecordsByDoctorIdExcludingRestricted)
   - جلب السجلات الطبية حسب مشرف الطبيب (السكرتير) (getMedicalRecordsBySecretarySupervisor)
   - تحديث بيانات سجل طبي (updateMedicalRecord)
   - حذف سجل طبي (deleteMedicalRecord)

15. مستودع المدونة (Blog Repository)
   - إنشاء مقال مدونة جديد (createBlog)
   - جلب جميع مقالات المدونة مع ترقيم الصفحات (getAllBlogs)
   - جلب آخر 3 مقالات مدونة (getLatestBlogs)
   - جلب مقال مدونة بالرقم التعريفي (getBlogById)
   - جلب مقال مدونة بالاسم المختصر (getBlogBySlug)
   - جلب مقالات مدونة حسب رقم تعريف الكاتب (getBlogsByAuthorId)
   - تحديث مقال مدونة (updateBlog)
   - حذف مقال مدونة (deleteBlog)
   - التحقق مما إذا كان مقال المدونة ينتمي إلى الكاتب (isBlogAuthor)

